<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>my little astral being</title>
		<meta name="description" content="look after your own astral pet!">

		<link rel="stylesheet" href="/styles/main.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
		<script src="scripts/main.js"></script>
	</head>
	<body class="hide">
		<div id="pet-name-dialog" title="You found an egg!">
			Your pet's name is <span id="pet-name" contenteditable="true">Fluffy</span>.
		</div>

		<div>
		<span data-showvariable="pet.name"></span> is <span data-showvariable="pet.body.species.articleName()"></span>
		</div>

		<table class="bottomright" data-arraytotable="pet.soul.elements.toTableArray()"></table>

		<div id="menu" class="center" data-arraytoradialmenu="pet.menu.toHTML()"></div>

		<canvas id="petcanvas"></canvas>

		<script type="text/javascript">
		$(function()
		{
			$.ui.dialog.prototype._title = function(title)
			{
				title.html(this.options.title);
			};

			$.extend($.ui.dialog.prototype.options,
			{
				dialogClass: "no-close",
				modal: true,
				resizable: false,
				draggable: false
			});

			$("#pet-name-dialog").dialog(
			{
				buttons:
				[{
					'data-setvariable':'{ "variable": "pet.name", "type": "desc", "element": "#pet-name" }',
					text: "OK",
					click: function()
					{
						// hack to make sure small layout things work
						window.dispatchEvent(new Event("resize"));
						$(this).dialog( "close" );
					}
				}],
				hide: { effect: "fade", duration: 500 }
			});
		});
		</script>
	</body>
</html>
